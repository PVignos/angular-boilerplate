<div class="dropdown relative">
  <!-- Trigger -->
  <button
    class="bg-gray-700 px-2 rounded hover:bg-gray-600 transition flex items-center space-x-2"
    (click)="toggleDropdown()"
  >
    <img
      [src]="getFlag(currentLanguage)"
      alt="{{ currentLanguage }} flag"
      class="w-5"
    />
    <span class="text-white capitalize">{{ currentLanguage }}</span>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-8 text-white"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Dropdown -->
  @if (isDropdownOpen) {
    <ul
      class="text-black absolute right-0 mt-2 w-32 bg-white border border-gray-300 rounded shadow-md z-10"
    >
      @for (lang of languages; track lang) {
        <li
          role="button"
          tabindex="0"
          (click)="switchLanguage(lang.code)"
          (keydown)="onKeyDown($event, lang.code)"
          class="flex items-center space-x-2 px-2 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <img [src]="getFlag(lang.code)" [alt]="lang + ' flag'" class="w-5" />
          <span class="capitalize">{{ lang.label }}</span>
        </li>
      }
    </ul>
  }
</div>
